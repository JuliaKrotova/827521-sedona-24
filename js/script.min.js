var link=document.querySelector(".title-button"),popup=document.querySelector(".search-form"),arrivalDate=popup.querySelector("[name=arrival-date]"),departureDate=popup.querySelector("[name=departure-date]"),adults=popup.querySelector("[name=adults]"),children=popup.querySelector("[name=children]"),isStorageSupport=!0,arrivalDateStorage="",departureDateStorage="",adultsStorage="",childrenStorage="";try{arrivalDateStorage=localStorage.getItem("arrivalDate"),departureDateStorage=localStorage.getItem("departureDate"),adultsStorage=localStorage.getItem("adults"),childrenStorage=localStorage.getItem("children")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.toggle("search-form-show"),arrivalDateStorage&&(arrivalDate.value=arrivalDateStorage),departureDateStorage&&(departureDate.value=departureDateStorage),adultsStorage&&(adults.value=adultsStorage),childrenStorage&&(children.value=childrenStorage),arrivalDate.classList.remove("input-invalid"),departureDate.classList.remove("input-invalid"),adults.classList.remove("input-invalid"),children.classList.remove("input-invalid"),popup.classList.remove("modal-error")}),popup.addEventListener("submit",function(e){arrivalDate.classList.remove("input-invalid"),departureDate.classList.remove("input-invalid"),adults.classList.remove("input-invalid"),children.classList.remove("input-invalid"),arrivalDate.value&&departureDate.value&&adults.value&&children.value?isStorageSupport&&(localStorage.setItem("arrivalDate",arrivalDate.value),localStorage.setItem("departureDate",departureDate.value),localStorage.setItem("adults",adults.value),localStorage.setItem("children",children.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"),arrivalDate.value||arrivalDate.classList.add("input-invalid"),departureDate.value||departureDate.classList.add("input-invalid"),adults.value||adults.classList.add("input-invalid"),children.value||children.classList.add("input-invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("search-form-show")&&(popup.classList.remove("search-form-show"),popup.classList.remove("input-invalid")))});
